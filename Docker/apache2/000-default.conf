<IfModule mod_speling.c>
	CheckSpelling On
	CheckCaseOnly On
</IfModule>

<VirtualHost *:80>
	# The ServerName directive sets the request scheme, hostname and port that
	# the server uses to identify itself. This is used when creating
	# redirection URLs. In the context of virtual hosts, the ServerName
	# specifies what hostname must appear in the request's Host: header to
	# match this virtual host. For the default virtual host (this file) this
	# value is not decisive as it is used as a last resort host regardless.
	# However, you must set it for any further virtual host explicitly.
	#ServerName www.example.com

	ServerAdmin webmaster@localhost
	DocumentRoot /var/www/html

	# Available loglevels: trace8, ..., trace1, debug, info, notice, warn,
	# error, crit, alert, emerg.
	# It is also possible to configure the loglevel for particular
	# modules, e.g.
	#LogLevel info ssl:warn

	ErrorLog ${APACHE_LOG_DIR}/error.log
	CustomLog ${APACHE_LOG_DIR}/access.log combined

	# For most configuration files from conf-available/, which are
	# enabled or disabled at a global level, it is possible to
	# include a line for only one particular virtual host. For example the
	# following line enables the CGI configuration for this host only
	# after it has been globally disabled with "a2disconf".
	#Include conf-available/serve-cgi-bin.conf

	# Alias for Error path mapped under /error
	Alias "/error" "/var/www/html"
	# 401 Unauthorized
	ErrorDocument 401 /error/error_static.html
	# 403 Forbidden
	ErrorDocument 403 /error/error_notfound.php
	# 404 Not Found
	ErrorDocument 404 /error/error_notfound.php
	# 500 Internal Server Error
	ErrorDocument 500 /error/error_static.html

	# User Files aus /data/files/*
	Alias "/files" "/var/data/files"
	<Directory "/var/data/files">
		Options -Indexes +MultiViews
		Require all granted
	</Directory>
	AliasMatch "^/files/([0-9]+)/(.*)$" "/getfile.php?user=$1&file=$2"

	# Userpics aus /data/userimages/*
	Alias "/data/userimages" "/var/data/userimages"
	<Directory "/var/data/userimages">
		Options -Indexes +MultiViews
		Require all granted
	</Directory>

	# Gallery Pics via /www/includes/gallery-readpic.php
	<IfModule mod_rewrite.c>
		RewriteEngine On
		RewriteRule "^/gallery/thumbs/([0-9]+)$" "/includes/gallery.readpic.php?id=$1&type=tn" [QSA]
		RewriteRule "^/gallery/([0-9]+)$" "/includes/gallery.readpic.php?id=$1" [QSA]
	</IfModule>

	# Tauschbörse Artikelbilder aus /data/tauschboerse/*
	Alias "/images/tauschboerse" "/var/data/tauschboerse"
	<Directory "/var/data/tauschboerse">
		Options -Indexes +MultiViews
		Require all granted
	</Directory>
</VirtualHost>

<IfModule mod_ssl.c>
	<VirtualHost *:443>
		ServerAdmin webmaster@localhost
		DocumentRoot /var/www/html

		ErrorLog /error.log
		CustomLog /access.log combined

		SSLCertificateFile /etc/apache2/ssl/cert.pem
		SSLCertificateKeyFile /etc/apache2/ssl/cert-key.pem
		SSLEngine on

		# Alias for Error path mapped under /error
		Alias "/error" "/var/www/html"
		# 401 Unauthorized
		ErrorDocument 401 /error/error_static.html
		# 403 Forbidden
		ErrorDocument 403 /error/error_notfound.php
		# 404 Not Found
		ErrorDocument 404 /error/error_notfound.php
		# 500 Internal Server Error
		ErrorDocument 500 /error/error_static.html

		# User Files aus /data/files/*
		Alias "/files" "/var/data/files"
		<Directory "/var/data/files">
			Options -Indexes +MultiViews
			Require all granted
		</Directory>
		AliasMatch "^/files/([0-9]+)/(.*)$" "/getfile.php?user=$1&file=$2"

		# Userpics aus /data/userimages/*
		Alias "/data/userimages" "/var/data/userimages"
		<Directory "/var/data/userimages">
			Options -Indexes +MultiViews
			Require all granted
		</Directory>

		# Gallery Pics via /www/includes/gallery-readpic.php
		<IfModule mod_rewrite.c>
			RewriteEngine On
			RewriteRule "^/gallery/thumbs/([0-9]+)$" "/includes/gallery.readpic.php?id=$1&type=tn" [QSA]
			RewriteRule "^/gallery/([0-9]+)$" "/includes/gallery.readpic.php?id=$1" [QSA]
		</IfModule>

		# Tauschbörse Artikelbilder aus /data/tauschboerse/*
		Alias "/images/tauschboerse" "/var/data/tauschboerse"
		<Directory "/var/data/tauschboerse">
			Options -Indexes +MultiViews
			Require all granted
		</Directory>
	</VirtualHost>
</IfModule>
# vim: syntax=apache ts=4 sw=4 sts=4 sr noet
